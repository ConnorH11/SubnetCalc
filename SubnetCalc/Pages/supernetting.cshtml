@page
@model SupernettingModel
@{
    ViewData["Title"] = "Supernetting Calculator";
}

<div class="container mt-5">
    <h2 class="text-center mb-4">Supernetting Calculator</h2>

    <form method="post">
        <div class="form-group mb-3">
            <label>Calculation Mode:</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="Mode" value="supernet" checked="@(Model.Mode == "supernet")" />
                <label class="form-check-label">Single Supernet CIDR</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="Mode" value="aggregate" checked="@(Model.Mode == "aggregate")" />
                <label class="form-check-label">CIDR Aggregation (Minimal Blocks)</label>
            </div>
        </div>

        <div class="form-group mb-3">
            <label>Enter Subnet CIDRs:</label>
            @for (int i = 0; i < Model.Subnets.Count; i++)
            {
                <div class="input-group mb-2">
                    <input type="text" class="form-control" name="Subnets[@i]" value="@Model.Subnets[i]" placeholder="e.g., 192.168.0.0/24" />
                </div>
            }
            <button type="submit" name="AddSubnet" class="btn btn-secondary mb-2">+ Add Subnet</button>
        </div>

        <button type="submit" class="btn btn-primary">Calculate Supernet</button>
    </form>

    @if (Model.Mode == "aggregate" && Model.AggregatedResults.Any())
    {
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">CIDR Aggregated Blocks</h5>
                <ul>
                    @foreach (var cidr in Model.AggregatedResults)
                    {
                        <li>@cidr</li>
                    }
                </ul>
            </div>
        </div>
    }

    @if (Model.Mode == "supernet" && Model.Result != null)
    {
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">Supernet Result</h5>
                <p><strong>Supernet CIDR:</strong> @Model.Result.Cidr</p>
                <p><strong>Network Address:</strong> @Model.Result.Network</p>
                <p><strong>Subnet Mask:</strong> @Model.Result.Mask</p>
                <p><strong>IP Range:</strong> @Model.Result.FirstHost - @Model.Result.LastHost</p>
            </div>
        </div>
    }

    @if (Model.Mode == "aggregate" && Model.AggregatedResults?.Any() == true)
    {
        <div class="card mt-4">
            <div class="card-body">
                <h5 class="card-title">CIDR Aggregated Blocks</h5>
                <ul>
                    @foreach (var cidr in Model.AggregatedResults)
                    {
                        <li>@cidr</li>
                    }
                </ul>
            </div>
        </div>
    }

</div>